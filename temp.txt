from PIL import Image, ImageOps

def preprocess_ocr_image(image_path, output_size=1120, pad_color=(255, 255, 255)):
    # Open image and crop region of interest
    image = Image.open(image_path).convert("RGB")
    width, height = image.size

    # Pad to square
    if width != height:
        delta_w = abs(width - height)
        padding = (0, delta_w // 2, 0, delta_w - delta_w // 2)  # (left, top, right, bottom)
        image = ImageOps.expand(image, padding, fill=pad_color)

    # Resize to target dimensions (if needed)
    image = image.resize((output_size, output_size))
    return image
