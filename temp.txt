import cv2
from skimage.metrics import structural_similarity as ssim
import numpy as np
from PIL import Image
import imagehash

# Load the images in grayscale
img1 = cv2.imread('document1.jpg', cv2.IMREAD_GRAYSCALE)
img2 = cv2.imread('document2.jpg', cv2.IMREAD_GRAYSCALE)

# Optionally, resize to the same dimensions (if necessary)
img1 = cv2.resize(img1, (600, 800))
img2 = cv2.resize(img2, (600, 800))

# Apply thresholding to convert images to binary
_, thresh1 = cv2.threshold(img1, 127, 255, cv2.THRESH_BINARY)
_, thresh2 = cv2.threshold(img2, 127, 255, cv2.THRESH_BINARY)

# Compute the Structural Similarity Index (SSIM)
score, diff = ssim(thresh1, thresh2, full=True)
print("SSIM score:", score)

# Compute perceptual hashes and compare them
hash1 = imagehash.average_hash(Image.fromarray(thresh1))
hash2 = imagehash.average_hash(Image.fromarray(thresh2))
print("Hash difference:", hash1 - hash2)
